#!/bin/sh

printf "$$" > ~/.cache/volid
update_volume(){
   vol="$(wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print $2*100}')"

   case 1 in
      $((vol >= 70)) ) icon="󰕾 " ;;
      $((vol >= 30)) ) icon="󰖀 " ;;
      $((vol >= 1)) ) icon=" " ;;
      * ) echo "󰸈 " && exit ;;
   esac
}

update_volume

trap "volume" "RTMIN"

echo "$icon$vol%"
